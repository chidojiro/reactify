(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,a,t){e.exports=t(62)},60:function(e,a,t){},62:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(28),l=t.n(r),o=t(8),i=t(5),c=t(6),u=t(9),p=t(7),m=t(10),g=t(66),f=t(68),h=t(63),d=t(67),y=t(3),v=t.n(y),b=t(4),E=t(12),k=t(24);k.initializeApp({apiKey:"AIzaSyDrh_HauM4PpUjuroREMbYjSXA9klvJp-s",authDomain:"mp3-angular4.firebaseapp.com",databaseURL:"https://mp3-angular4.firebaseio.com",projectId:"mp3-angular4",storageBucket:"mp3-angular4.appspot.com",messagingSenderId:"220425624941"});var S=k,_={key:"",artists:[],downloadURL:"",genres:[],likedUsers:[],title:"",views:0,lyric:""},w={uid:"",displayName:"",email:"",isAdmin:!1,playlist:[]},N=new S.auth.GoogleAuthProvider,O=function(){var e=Object(E.a)(v.a.mark(function e(){var a,t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.auth().signInWithPopup(N);case 2:return a=e.sent,e.next=5,S.database().ref("users/".concat(a.user.uid)).update({displayName:a.user.displayName,email:a.user.email});case 5:return e.next=7,j(a.user.uid);case 7:return t=e.sent,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(E.a)(v.a.mark(function e(a){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("users/".concat(a)).once("value");case 2:return t=e.sent.val(),e.abrupt("return",t?Object(b.a)({},w,t,{uid:a}):null);case 4:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),P=function(){var e=Object(E.a)(v.a.mark(function e(){var a,t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("songs").once("value");case 2:return a=e.sent,t=a.val(),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(E.a)(v.a.mark(function e(a,t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("songs/".concat(t.key,"/likedUsers")).once("value");case 2:if(e.t0=e.sent.val(),e.t0){e.next=5;break}e.t0=[];case 5:(n=e.t0).push(a.uid),S.database().ref("songs/".concat(t.key,"/likedUsers")).set(n);case 8:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),x=function(){var e=Object(E.a)(v.a.mark(function e(a,t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("songs/".concat(t.key,"/likedUsers")).once("value");case 2:(n=e.sent.val()).splice(n.indexOf(a.uid),1),S.database().ref("songs/".concat(t.key,"/likedUsers")).set(n);case 5:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),I=function(){var e=Object(E.a)(v.a.mark(function e(a,t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("users/".concat(a.uid,"/playlist")).once("value");case 2:if(e.t0=e.sent.val(),e.t0){e.next=5;break}e.t0=[];case 5:(n=e.t0).push(t.key),S.database().ref("users/".concat(a.uid,"/playlist")).set(n);case 8:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),T=function(){var e=Object(E.a)(v.a.mark(function e(a,t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("users/".concat(a.uid,"/playlist")).once("value");case 2:if(e.t0=e.sent.val(),e.t0){e.next=5;break}e.t0=[];case 5:(n=e.t0).splice(n.indexOf(t.key),1),S.database().ref("users/".concat(a.uid,"/playlist")).set(n);case 8:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),L=function(){var e=Object(E.a)(v.a.mark(function e(a){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("songs/".concat(a.key,"/views")).once("value");case 2:t=e.sent.val(),t++,S.database().ref("songs/".concat(a.key,"/views")).set(t);case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),U=function(){var e=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.database().ref("artists").once("value");case 2:return e.abrupt("return",e.sent.val());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),A=function(e){return{type:"SELECT_NOW_PLAYING",payload:{songKey:e}}},M=function(e){return{type:"PLAY_PLAYLIST",payload:{playlist:e}}},K=function(){return function(){var e=Object(E.a)(v.a.mark(function e(a){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,localStorage.setItem("localUser",t.uid),a({type:"SIGN_IN",payload:t});case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},G=function(e,a){return T(e,a),{type:"REMOVE_FROM_PLAYLIST",payload:{songKey:a.key}}},B=function(e){return e.children},D=t(58),R=t(65),Y=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(s)))).state={shouldShowSideBar:!1},t.toggleSidebar=function(){t.setState(function(e){return{shouldShowSideBar:!e.shouldShowSideBar}})},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(B,null,s.a.createElement("div",{className:"sidebar ".concat(this.state.shouldShowSideBar?"sidebar--active":"")},s.a.createElement("i",{className:"fas fa-bars hamburger-btn btn",onClick:this.toggleSidebar}),s.a.createElement("div",{className:"sidebar__logo"},s.a.createElement(D.a,{to:"/",className:"navigator"},s.a.createElement("h3",null,"Reactify"))),s.a.createElement("div",{className:"sidebar__navigation"},s.a.createElement(R.a,{to:"/search",className:"sidebar__navigator sidebar__navigator--search"},s.a.createElement("i",{className:"fa fa-search"}),s.a.createElement("span",null,"T\xecm Ki\u1ebfm")),s.a.createElement(R.a,{to:"/",className:"sidebar__navigator sidebar__navigator--home"},s.a.createElement("i",{className:"fa fa-home"}),s.a.createElement("span",null,"Trang Ch\u1ee7")),s.a.createElement(R.a,{to:"/playlist",className:"sidebar__navigator sidebar__navigator--plalist"},s.a.createElement("i",{className:"fas fa-book-reader"}),s.a.createElement("span",null,"Playlist"))),this.props.user?s.a.createElement(D.a,{to:"/user",className:"sidebar__authen sidebar__authen--after"},s.a.createElement("i",{className:"far fa-user"}),s.a.createElement("span",null,this.props.user.displayName)):s.a.createElement("div",{className:"sidebar__authen sidebar__authen--before"},s.a.createElement("span",{onClick:this.props.signIn,className:"sidebar__authen-option"},"\u0110\u0103ng Nh\u1eadp"))))}}]),a}(n.Component),H=Object(o.b)(function(e){return{user:e.user}},{signIn:K})(Y),W=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chart__song with-seperator"},s.a.createElement("div",{className:"avatar"},s.a.createElement("i",{className:"fas fa-music"})),s.a.createElement("div",{className:"chart__song-info"},s.a.createElement("h4",{onClick:function(){return e.props.selectNowPlaying(e.props.song.key)},className:"chart__song-info--primary song-title"},this.props.song.title),s.a.createElement("h5",{className:"chart__song-info--secondary"},this.props.song.artists.join(", "))))}}]),a}(n.Component),F=Object(o.b)(null,{selectNowPlaying:A})(W),V=function(e){return s.a.createElement("div",{className:"chart"},s.a.createElement("h3",{className:"chart__header"},"BXH"),e.songs.map(function(e){return s.a.createElement(F,{song:e,key:e.key})}))},Q=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"feature-artist"},s.a.createElement("h3",{className:"feature-artist__name with-seperator"},this.props.artist.name),s.a.createElement("div",{className:"feature-artist__songs"},this.props.artist.featureSongs.map(function(a){return s.a.createElement("div",{className:"feature-artist__song",key:a.key},s.a.createElement("div",{className:"avatar"},s.a.createElement("i",{className:"fas fa-music"})),s.a.createElement("div",null,s.a.createElement("h4",{onClick:function(){return e.props.selectNowPlaying(a.key)},className:"feature-artist__song-info song-title"},a.title)))})))}}]),a}(n.Component),X=Object(o.b)(null,{selectNowPlaying:A})(Q),J=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(s)))).state={featureArtists:null},t.componentDidMount=Object(E.a)(v.a.mark(function e(){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeatureArtists(4);case 2:a=e.sent,t.setState({featureArtists:a});case 4:case"end":return e.stop()}},e,this)})),t.getHighestViewSong=function(){return Object.keys(t.props.allSongs).map(function(e){return Object(b.a)({},t.props.allSongs[e],{key:e})}).sort(function(e,a){return a.views-e.views}).slice(0,10)},t.getFeatureArtists=function(){var e=Object(E.a)(v.a.mark(function e(a){var n,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:return n=e.sent,s=Object.keys(n).map(function(e){return{name:e,views:n[e].reduce(function(e,a){return e+t.props.allSongs[a].views},0)}}).sort(function(e,a){return a.views-e.views}).slice(0,a).map(function(e){var s=n[e.name].map(function(e){return Object(b.a)({},_,t.props.allSongs[e],{key:e})}).sort(function(e,a){return a.views-e.views}).slice(0,a);return Object(b.a)({},e,{featureSongs:s})}),e.abrupt("return",s);case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return console.log("asd"),this.state.featureArtists?s.a.createElement("div",{className:"general-content home-page"},s.a.createElement("div",{className:"feature-artists"},s.a.createElement("h3",{className:"feature-artists__header"},"Ca S\u0129 N\u1ed5i B\u1eadt"),this.state.featureArtists.map(function(e){return s.a.createElement(X,{artist:e,key:e.name})})),s.a.createElement(V,{songs:this.getHighestViewSong()})):null}}]),a}(n.Component),z=Object(o.b)(function(e){return{allSongs:e.songs.allSongs}})(J),q=t(32),$=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/ + /g," ")).trim()},Z=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"search-result__song"},s.a.createElement("div",{className:"avatar"},s.a.createElement("i",{className:"fas fa-music"})),s.a.createElement("div",null,s.a.createElement("div",{className:"search-result__song-title"},s.a.createElement("h4",{className:"search-result__song-title--primary song-title",onClick:function(){return e.props.selectNowPlaying(e.props.song.key)}},"".concat(this.props.song.title," - ").concat(this.props.song.artists.join(", "))),this.props.user&&this.props.user.isAdmin&&s.a.createElement(B,null,s.a.createElement("i",{className:"fas fa-edit admin-operation btn"}),s.a.createElement("i",{className:"fas fa-trash admin-operation btn"}))),s.a.createElement("h5",{className:"search-result__song-title--secondary"},"Th\u1ec3 Lo\u1ea1i: ".concat(this.props.song.genres.join(", ")))))}}]),a}(n.Component),ee=Object(o.b)(function(e){return{user:e.user}},{selectNowPlaying:A})(Z),ae=function(e){return s.a.createElement("div",{className:"search-result__song-list"},e.songs.map(function(e){return s.a.createElement(ee,{song:e,key:e.key})}))},te=function(e){return s.a.createElement("div",{className:"paging"},s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(1)}},"\u0110\u1ea7u"),s.a.createElement("span",{className:"paging__navigate btn ".concat(1===e.page?"disabled":""),onClick:function(){return e.goToPage(e.page-1)}},"Tr\u01b0\u1edbc"),e.max-e.page<=0&&e.page>=5?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page-4)}},e.page-4):null,e.max-e.page<=1&&e.page>=4?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page-3)}},e.page-3):null,e.page>=3?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page-2)}},e.page-2):null,e.page>=2?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page-1)}},e.page-1):null,s.a.createElement("span",{className:"paging__navigate paging__present-page btn"},e.page),e.max-e.page>=1?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page+1)}},e.page+1):null,e.max-e.page>=2?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page+2)}},e.page+2):null,e.max-e.page>=3&&e.page<=2?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page+3)}},e.page+3):null,e.max-e.page>=4&&1===e.page?s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.page+4)}},e.page+4):null,s.a.createElement("span",{className:"paging__navigate btn ".concat(e.max===e.page?"disabled":""),onClick:function(){return e.goToPage(e.page+1)}},"Ti\u1ebfp"),s.a.createElement("span",{className:"paging__navigate btn",onClick:function(){return e.goToPage(e.max)}},"Cu\u1ed1i"))},ne=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(s)))).componentWillUpdate=function(){window.scrollTo(0,0)},t.componentDidUpdate=function(){window.scrollTo(0,0)},t.state={keywords:null,songsToShow:null,page:1,totalSongs:0},t.getPageQuery=function(){var e=t.props.location.search,a=new URLSearchParams(e);return a.get("page")?+a.get("page"):1},t.filterSongsToShow=function(e,a){return e.slice(10*(a-1),10*a)},t.filterSongsByKeywords=function(e){return e=$(e),Object.keys(t.props.allSongs).reduce(function(a,n){var s=t.props.allSongs[n];return-1!==$((s.title+s.artists.join(" ")).toLowerCase()).indexOf(e)?Object(q.a)(a).concat([Object(b.a)({},_,s,{key:n})]):a},[])},t.goToPage=function(e){t.props.history.push("".concat(t.props.location.pathname,"?page=").concat(e))},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props.match.params.keywords,a=this.getPageQuery(),t=this.filterSongsByKeywords(e),n=this.filterSongsToShow(t,a),r=t.length;return s.a.createElement("div",{className:"search-result"},s.a.createElement("span",{className:"search-result__total"},"".concat(r," K\u1ebft Qu\u1ea3:")),s.a.createElement(ae,{songs:n}),s.a.createElement(te,{page:a,max:Math.ceil(r/10),goToPage:this.goToPage}))}}]),a}(n.Component),se=Object(o.b)(function(e){return{allSongs:e.songs.allSongs}})(ne),re=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(s)))).state={keywords:""},t.onSubmit=function(e){e.preventDefault(),document.querySelector(".search-input__icon").click()},t.search=function(e){t.state.keywords||e.preventDefault(),t.setState({keywords:""})},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"general-content search-page"},s.a.createElement("form",{onSubmit:this.onSubmit,className:"search-input"},s.a.createElement("input",{type:"text",placeholder:"T\xecm B\xe0i H\xe1t",value:this.state.keywords,onChange:function(a){return e.setState({keywords:a.target.value})}}),s.a.createElement(D.a,{to:"/search/".concat(this.state.keywords),className:"search-input__icon"},s.a.createElement("i",{className:"fa fa-search"}))),this.props.match.params.keywords&&s.a.createElement(se,this.props))}}]),a}(n.Component),le=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(s)))).state={playlist:null,user:null,isPlaying:!1,volume:1,shouldLoop:!1,isMuted:!1,playedPercentage:0,isInPlaylist:!1,isLiked:!1,shouldShuffle:!1},t.interval=null,t.audio=null,t.componentWillMount=function(){var e=localStorage.getItem("isMuted"),a=localStorage.getItem("volume"),n=!!localStorage.getItem("shouldLoop"),s=!!localStorage.getItem("shouldShuffle");t.setState({isMuted:!!e,volume:a?Number(a):1,shouldShuffle:s,shouldLoop:n})},t.componentDidMount=function(){window.scrollTo(0,0),t.audio.volume=t.state.volume},t.componentWillReceiveProps=function(e){e.nowPlaying!==t.props.nowPlaying&&(t.audio.load(),clearInterval(t.interval))},t.componentWillUnmount=function(){clearInterval(t.interval)},t.play=function(){t.setState({isPlaying:!0}),t.interval=setInterval(function(){t.setState({playedPercentage:t.audio.currentTime/t.audio.duration})},50)},t.isSongInPlaylist=function(){return!!t.props.user&&-1!==t.props.user.playlist.indexOf(t.props.nowPlaying.key)},t.didUserLikeThisSong=function(){return!!t.props.user&&-1!==t.props.nowPlaying.likedUsers.indexOf(t.props.user.uid)},t.onEnded=function(){clearInterval(t.interval),t.setState({isPlaying:!1}),t.props.playlist&&t.next()},t.onPlayClick=function(){t.play(),t.audio.play()},t.onCanPlay=function(){L(t.props.nowPlaying),t.play()},t.onPauseClick=function(){t.audio.pause(),clearInterval(t.interval),t.setState({isPlaying:!1})},t.onLoopClick=function(){t.state.shouldLoop?(localStorage.removeItem("shouldLoop"),t.setState({shouldLoop:!1})):(localStorage.setItem("shouldLoop","true"),t.setState({shouldLoop:!0}))},t.onAddClick=function(){if(!t.props.user)return alert("Please Sign In!");t.props.addSongToUserPlaylist(t.props.user,t.props.nowPlaying)},t.onCheckClick=function(){t.props.removeSongFromUserPlaylist(t.props.user,t.props.nowPlaying)},t.onHeartClick=function(){if(!t.props.user)return alert("Please Sign In!");t.didUserLikeThisSong()?t.props.unlikeSong(t.props.user,t.props.nowPlaying):t.props.likeSong(t.props.user,t.props.nowPlaying)},t.onProgressChange=function(e){clearInterval(t.interval),t.audio.currentTime=e.target.value*t.audio.duration},t.onVolumeChange=function(e){t.audio.volume=Number(e.target.value),localStorage.setItem("volume",e.target.value),localStorage.removeItem("isMuted"),t.setState({isMuted:!1,volume:t.audio.volume})},t.onMuteClick=function(){localStorage.setItem("isMuted","true"),t.setState({isMuted:!0,volume:0})},t.onUnmuteClick=function(){localStorage.removeItem("isMuted"),t.setState({isMuted:!1,volume:t.audio.volume})},t.onShuffleClick=function(){t.state.shouldShuffle?(localStorage.removeItem("shouldShuffle"),t.setState({shouldShuffle:!1})):(localStorage.setItem("shouldShuffle","true"),t.setState({shouldShuffle:!0}))},t.next=function(){var e;t.state.shouldShuffle?e=Math.floor(Math.random()*t.props.playlist.length):(e=t.props.playlist.indexOf(t.props.nowPlaying.key)+1)===t.props.playlist.length&&(e=0);var a=t.props.playlist[e];t.props.selectNowPlaying(a),t.props.playPlaylist(t.props.playlist)},t.previous=function(){var e;t.state.shouldShuffle?e=Math.floor(Math.random()*t.props.playlist.length):0===(e=t.props.playlist.indexOf(t.props.nowPlaying.key)-1)&&(e=t.props.playlist.length);var a=t.props.playlist[e];t.props.selectNowPlaying(a),t.props.playPlaylist(t.props.playlist)},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(B,null,s.a.createElement("audio",{controls:!0,style:{display:"none"},autoPlay:!0,ref:function(a){e.audio=a},onCanPlay:this.onCanPlay,onEnded:this.onEnded,loop:this.state.shouldLoop,muted:this.state.isMuted},this.props.nowPlaying&&s.a.createElement("source",{src:this.props.nowPlaying.downloadURL})),s.a.createElement("div",{className:"music-player ".concat(this.props.nowPlaying?"":"disabled")},s.a.createElement("div",{className:"music-player__song-info"},this.props.nowPlaying&&s.a.createElement(B,null,s.a.createElement("div",{className:"avatar"},s.a.createElement("i",{className:"fas fa-music"})),s.a.createElement("div",null,s.a.createElement("h5",{className:"music-player__song-info--primary"},this.props.nowPlaying.title),s.a.createElement("h5",{className:"music-player__song-info--secondary"},this.props.nowPlaying.artists.join(", "))),s.a.createElement("div",{className:"music-player__interaction"},s.a.createElement("div",{className:"view"},s.a.createElement("i",{className:"fa fa-headphones",title:"S\u1ed1 l\u01b0\u1ee3t nghe"}),this.props.nowPlaying&&s.a.createElement("span",null,this.props.nowPlaying.views)),s.a.createElement("i",{className:"fa fa-heart btn ".concat(this.didUserLikeThisSong()?"liked":""),onClick:this.onHeartClick,title:"Th\xedch b\xe0i h\xe1t"}),this.isSongInPlaylist()?s.a.createElement("i",{className:"fas fa-check btn ".concat(this.props.playlist?"disabled":""),onClick:this.onCheckClick,title:"Xo\xe1 kh\u1ecfi playlist"}):s.a.createElement("i",{className:"fa fa-plus btn",onClick:this.onAddClick,title:"Th\xeam v\xe0o playlist"})))),s.a.createElement("div",{className:"music-player__main"},s.a.createElement("div",{className:"music-player__controls"},s.a.createElement("i",{className:"fas fa-random btn \n                                    ".concat(this.props.playlist?"":"disabled"," \n                                    ").concat(this.state.shouldShuffle?"active-shuffle":""),onClick:this.onShuffleClick}),s.a.createElement("i",{className:"fas fa-step-backward btn  ".concat(this.props.playlist?"":"disabled"),onClick:this.previous}),this.state.isPlaying?s.a.createElement("i",{onClick:this.onPauseClick,className:"fas fa-pause btn"}):s.a.createElement("i",{onClick:this.onPlayClick,className:"fas fa-play btn"}),s.a.createElement("i",{className:"fas fa-step-forward btn ".concat(this.props.playlist?"":"disabled"),onClick:this.next}),s.a.createElement("i",{className:"fas fa-retweet btn ".concat(this.state.shouldLoop?"active-loop":""),onClick:this.onLoopClick})),s.a.createElement("div",{className:"music-player__progress"},s.a.createElement("input",{type:"range",className:"slider",value:this.props.nowPlaying?this.state.playedPercentage:0,max:"1",min:"0",step:"0.0001",onChange:this.onProgressChange}))),s.a.createElement("div",{className:"music-player__volume"},this.state.isMuted||0===this.state.volume?s.a.createElement("i",{className:"fas fa-volume-mute btn",onClick:this.onUnmuteClick}):s.a.createElement("i",{className:"fas fa-volume-up btn",onClick:this.onMuteClick}),s.a.createElement("input",{type:"range",ref:function(a){e.volume=a},className:"music-player__volume-adjuster slider",max:"1",min:"0",step:"0.0001",value:this.state.isMuted?0:this.state.volume,onChange:this.onVolumeChange}))))}}]),a}(n.Component),oe=Object(o.b)(function(e){return{user:e.user,nowPlaying:e.songs.nowPlaying,playlist:e.songs.playlist}},{likeSong:function(e,a){return C(e,a),{type:"LIKE_SONG",payload:{userUid:e.uid,songKey:a.key}}},unlikeSong:function(e,a){return x(e,a),{type:"UNLIKE_SONG",payload:{userUid:e.uid,songKey:a.key}}},addSongToUserPlaylist:function(e,a){return I(e,a),{type:"ADD_TO_PLAYLIST",payload:{songKey:a.key}}},removeSongFromUserPlaylist:G,selectNowPlaying:A,playPlaylist:M})(le),ie=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=Object(b.a)({},_,this.props.allSongs[this.props.match.params.key],{key:this.props.match.params.key});return s.a.createElement("div",{className:"general-content now-playing"},s.a.createElement(oe,{song:e}),s.a.createElement("h3",{className:"lyric-header"},"L\u1eddi B\xe0i H\xe1t"),s.a.createElement("p",{className:"lyric"},e.lyric))}}]),a}(n.Component),ce=Object(o.b)(function(e){return{allSongs:e.songs}})(ie),ue={isEditing:!1},pe=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(s)))).state=ue,t.onEditClick=function(){t.props.stopPlaying(),t.setState({isEditing:!0})},t.onBackClick=function(){t.setState(ue)},t.onDeleteClick=function(e){t.props.removeSongFromUserPlaylist(t.props.user,Object(b.a)({},t.props.allSongs[e],_,{key:e}))},t.onSongInPlaylistClick=function(e){t.props.selectNowPlaying(e),t.props.playPlaylist(t.props.user.playlist)},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e,a=this;return this.props.user?(e=this.props.user.playlist&&0!==this.props.user.playlist.length?s.a.createElement(B,null,s.a.createElement("div",{className:"user-playlist__songs"},this.props.user.playlist.map(function(e,t){return s.a.createElement("div",{key:e},s.a.createElement("div",{className:"user-playlist__song"},s.a.createElement("h4",{className:"song-title ".concat(a.state.isEditing?"disabled":""),onClick:function(){return a.onSongInPlaylistClick(e)}},t+1,". ",a.props.allSongs[e].title," - ",a.props.allSongs[e].artists.join(", ")),a.props.nowPlaying&&e===a.props.nowPlaying.key&&!a.state.isEditing?s.a.createElement("i",{className:"fas fa-play-circle"}):null,a.state.isEditing?s.a.createElement("i",{className:"fas fa-trash user-playlist__remove btn",onClick:function(){return a.onDeleteClick(e)}}):null))}))):s.a.createElement("h4",null,"Ch\u01b0a C\xf3 B\xe0i H\xe1t N\xe0o"),s.a.createElement("div",{className:"general-content user-playlist"},s.a.createElement("div",{className:"user-playlist__header with-seperator"},s.a.createElement("h2",null,"Playlist C\u1ee7a B\u1ea1n"),s.a.createElement("i",{className:"fas fa-edit btn ".concat(this.state.isEditing?"disabled":""),onClick:this.onEditClick})),e,this.state.isEditing?s.a.createElement("div",{className:"btn playlist-save",onClick:this.onBackClick},s.a.createElement("strong",null,"< Quay L\u1ea1i")):null)):(alert("Please Sign In"),s.a.createElement(d.a,{to:"/"}))}}]),a}(n.Component),me=Object(o.b)(function(e){return{user:e.user,nowPlaying:e.songs.nowPlaying,allSongs:e.songs.allSongs}},{removeSongFromUserPlaylist:G,selectNowPlaying:A,playPlaylist:M,stopPlaying:function(){return{type:"STOP_PLAYING"}}})(pe),ge=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"general-content user-page"},s.a.createElement("i",{className:"far fa-user user__avatar"}),s.a.createElement("button",{className:"user__operation",onClick:this.props.signOut},"\u0110\u0103ng Xu\u1ea5t"))}}]),a}(n.Component),fe=Object(o.b)(null,{signOut:function(){return S.auth().signOut(),localStorage.removeItem("localUser"),{type:"SIGN_OUT"}}})(ge),he=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getUser(),this.props.getAllSongs()}},{key:"render",value:function(){return this.props.allSongs?s.a.createElement(g.a,null,s.a.createElement(B,null,s.a.createElement(H,null),s.a.createElement(f.a,null,s.a.createElement(h.a,{exact:!0,path:"/",component:z}),s.a.createElement(h.a,{path:"/search/:keywords",component:re}),s.a.createElement(h.a,{path:"/search",component:re}),s.a.createElement(h.a,{path:"/song/:key",component:ce}),s.a.createElement(h.a,{path:"/playlist",component:me}),this.props.user&&s.a.createElement(h.a,{path:"/user",component:fe}),s.a.createElement(d.a,{to:"/"})),s.a.createElement(oe,null))):null}}]),a}(n.Component),de=Object(o.b)(function(e){return{user:e.user,allSongs:e.songs.allSongs}},{signIn:K,getUser:function(){return function(){var e=Object(E.a)(v.a.mark(function e(a){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("localUser"))){e.next=7;break}return e.next=4,j(t);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:n=e.t0,a({type:"GET_USER",payload:n?Object(b.a)({},w,n):null});case 10:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},getAllSongs:function(){return function(){var e=Object(E.a)(v.a.mark(function e(a){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,Object.keys(t).forEach(function(e){t[e]=Object(b.a)({},_,t[e])}),a({type:"GET_ALL_SONGS",payload:t});case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()}})(he);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(60);var ye=t(16),ve=t(31),be=function(){var e,a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SIGN_IN":return n.payload;case"SIGN_OUT":return null;case"GET_USER":return n.payload;case"ADD_TO_PLAYLIST":return(a=(e=Object(b.a)({},t)).playlist).push(n.payload.songKey),e.playlist=a,e;case"REMOVE_FROM_PLAYLIST":return(a=(e=Object(b.a)({},t)).playlist).splice(e.playlist.indexOf(n.payload.songKey),1),e.playlist=a,e;default:return t}},Ee={allSongs:null,nowPlaying:null,playlist:null},ke=function(){var e,a,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GET_ALL_SONGS":return Object(b.a)({},t,{allSongs:n.payload});case"LIKE_SONG":return(a=(e=Object(b.a)({},t)).allSongs[n.payload.songKey].likedUsers=e.allSongs[n.payload.songKey].likedUsers?e.allSongs[n.payload.songKey].likedUsers:[]).push(n.payload.userUid),e.allSongs[n.payload.songKey].likedUsers=a,e;case"UNLIKE_SONG":return(a=(e=Object(b.a)({},t)).allSongs[n.payload.songKey].likedUsers=e.allSongs[n.payload.songKey].likedUsers?e.allSongs[n.payload.songKey].likedUsers:[]).splice(a.indexOf(n.payload.userUid),1),e;case"SELECT_NOW_PLAYING":return(e=Object(b.a)({},t)).nowPlaying=Object(b.a)({},e.allSongs[n.payload.songKey],{key:n.payload.songKey}),e.playlist=Ee.playlist,e;case"PLAY_PLAYLIST":return e=Object(b.a)({},t,{playlist:n.payload.playlist});case"STOP_PLAYING":return e=Object(b.a)({},t,{nowPlaying:null,playlist:null});default:return t}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch((arguments.length>1?arguments[1]:void 0).types){case"TOGGLE_SIDEBAR":return Object(b.a)({},e,{shouldShowSidebar:!e.shouldShowSidebar});default:return e}},_e=Object(ye.c)({user:be,songs:ke,UI:Se}),we=ye.d,Ne=Object(ye.e)(_e,we(Object(ye.a)(ve.a))),Oe=s.a.createElement(o.a,{store:Ne},s.a.createElement(de,null));l.a.render(Oe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.3a3aecce.chunk.js.map